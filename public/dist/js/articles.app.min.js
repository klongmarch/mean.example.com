function viewArticles(){let e=window.location.origin+"/api/users",n=new XMLHttpRequest;n.open("GET",e),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response).users,a="",r="";for(let e=0;e<t.length;e++)r+=`<tr>\n        <td>\n          <a href="#view-${t[e]._id}">${t[e].last_name}, ${t[e].first_name}</a>\n        </td>\n        <td>${t[e].username}</td>\n        <td>${t[e].email}</td>\n      </tr>`;a=`<div class="card">\n      <div class="card-header clearfix">\n        <h2 class="h3 float-left">Users</h2>\n        <div class="float-right">\n          <a href="#create" class="btn btn-primary">New User</a>\n        </div>\n      </div>\n      <div class="table-responsive">\n        <table class="table table-striped table-hover table-bordered">\n          <thead>\n            <tr>\n              <td>Name</td>\n              <td>Username</td>\n              <td>Email</td>\n            </tr>\n          </thead>\n          <tbody>${r}</tbody>\n        </table>\n      </div>\n    </div>`,e.innerHTML=a}}function createArticle(){document.getElementById("app").innerHTML='\n      <div class="card">\n        <div class="card-header clearfix">\n          <h2 class="h3 float-left">Create a New User</h2>\n          <div class="float-right">\n            <a href="#" class="btn btn-primary">Cancel</a>\n          </div>\n        </div>\n        <div class="card-body">\n          <form id="createArticle" class="card-body">\n            <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n\n            <div class="row">\n              <div class="form-group col-md-6">\n                <label for="first_name">First Name</label>\n                <input type="text" id="first_name" name="first_name" class="form-control" required>\n              </div>\n\n              <div class="form-group col-md-6">\n                <label for="last_name">Last Name</label>\n                <input type="text" id="last_name" name="last_name" class="form-control" required>\n              </div>\n            </div>\n\n            <div class="row">\n              <div class="form-group col-md-6">\n                <label for="username">Username</label>\n                <input type="text" id="username" name="username" class="form-control" required>\n              </div>\n\n              <div class="form-group col-md-6">\n                <label for="email">Email</label>\n                <input type="email" id="email" name="email" class="form-control" required>\n              </div>\n            </div>\n\n            <div class="text-right">\n              <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n            </div>\n          </form>\n        </div>\n      </div>\n  '}function viewArticle(e){let n=`${window.location.origin}/api/users/${e}`,t=new XMLHttpRequest;t.open("GET",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response),a="";a=`<div class="card">\n      <div class="card-header clearfix">\n        <h2 class="h3 float-left">${n.user.first_name} ${n.user.last_name}</h2>\n        <div class="float-right">\n          <a href="#edit-${n.user._id}" class="btn btn-primary">Edit</a>\n        </div>\n      </div>\n      <div class="card-body">\n        <div>${n.user.username}</div>\n        <div>${n.user.email}</div>\n      </div>\n    </div>`,e.innerHTML=a}}function editArticle(e){let n=`${window.location.origin}/api/users/${e}`,t=new XMLHttpRequest;t.open("GET",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response);var a=`\n      <div class="card">\n        <div class="card-header clearfix">\n          <h2 class="h3 float-left">Edit</h2>\n          <div class="float-right">\n            <a href="#" class="btn btn-primary">Cancel</a>\n          </div>\n        </div>\n        <div class="card-body">\n          <form id="editArticle" class="card-body">\n            <input type="hidden" id="_id" name="_id" value="${n.user._id}">\n            <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n  \n            <div class="row">\n              <div class="form-group col-md-6">\n                <label for="first_name">First Name</label>\n                <input type="text" id="first_name" name="first_name" class="form-control" value="${n.user.first_name}" required>\n              </div>\n  \n              <div class="form-group col-md-6">\n                <label for="last_name">Last Name</label>\n                <input type="text" id="last_name" name="last_name" class="form-control" value="${n.user.last_name}" required>\n              </div>\n            </div>\n  \n            <div class="row">\n              <div class="form-group col-md-6">\n                <label for="username">Username</label>\n                <input type="text" id="username" name="username" class="form-control" value="${n.user.username}" required>\n              </div>\n  \n              <div class="form-group col-md-6">\n                <label for="email">Email</label>\n                <input type="email" id="email" name="email" class="form-control" value="${n.user.email}" required>\n              </div>\n            </div>\n  \n            <div class="text-right">\n              <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n            </div>\n          </form>\n        </div>\n      </div>\n      <div>\n        <a href="#delete-${n.user._id}" class="text-danger">Delete</a>\n      </div>\n    `;e.innerHTML=a,processRequest("editArticle","/api/articles","PUT")}}function deleteView(e){let n=`${window.location.origin}/api/users/${e}`,t=new XMLHttpRequest;t.open("GET",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response),a="";a=`<div class="card bg-transparent border-danger text-danger bg-danger">\n      <div class="card-header bg-transparent border-danger">\n        <h2 class="h3 text-center">Your About to Delete a User</h2>\n      </div>\n      <div class="card-body text-center">\n        <div>\n          Are you sure you want to delete\n          <strong>${n.user.first_name} ${n.user.last_name}</strong>\n        </div>\n\n        <div>Username: <strong>${n.user.username}</strong></div>\n        <div>Email: <strong>${n.user.email}</strong></div>\n\n        <div class="text-center">\n          <br>\n          <a onclick="usersApp.deleteArticle('${n.user._id}');" class="btn btn-lg btn-danger text-white">\n            Yes delete ${n.user.username}\n          </a>\n        </div>\n\n      </div>\n    </div>`,e.innerHTML=a}}function deleteArticle(e){let n=`${window.location.origin}/api/articles/${e}`,t=new XMLHttpRequest;t.open("DELETE",n),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){!0===JSON.parse(t.response).success?window.location.hash="#":alert("Unknown error, the user could not be deleted")}}function processRequest(e,n,t){let a=document.getElementById(e);a.addEventListener("submit",(function(e){e.preventDefault();let r=new FormData(a),s=`${window.location.origin}${n}`,i=new XMLHttpRequest;i.open(t,s),i.setRequestHeader("Content-Type","application/json; charset=UTF-8");let l={};r.forEach((function(e,n){l[n]=e})),i.send(JSON.stringify(l)),i.onload=function(){!0===JSON.parse(i.response).success?window.location.href="/":document.getElementById("formMsg").style.display="block"}}))}var articlesApp={load:function(){alert("LOADED")},deleteArticle:function(e){deleteArticle(e)}};articlesApp.load();